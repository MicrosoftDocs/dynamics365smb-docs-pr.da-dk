---
title: "Planlægge sager til at køre automatisk | Microsoft Docs"
description: "Planlagte sager styres af opgavekøen. Disse sager kører rapporter og kodeenheder. Du kan angive opgaver, der skal køres én gang eller gentagne gange."
author: edupont04
ms.service: dynamics365-business-central
ms.topic: article
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: 
ms.date: 10/01/2018
ms.author: edupont
ms.translationtype: HT
ms.sourcegitcommit: 33b900f1ac9e295921e7f3d6ea72cc93939d8a1b
ms.openlocfilehash: ad0f99509ff1a191c62dd1c3a6d569c9884ea851
ms.contentlocale: da-dk
ms.lasthandoff: 11/26/2018

---
# <a name="use-job-queues-to-schedule-tasks"></a><span data-ttu-id="c42cf-105">Du kan bruge opgavekøer til at planlægge opgaver</span><span class="sxs-lookup"><span data-stu-id="c42cf-105">Use Job Queues to Schedule Tasks</span></span>
<span data-ttu-id="c42cf-106">Opgavekøer i [!INCLUDE[d365fin](includes/d365fin_md.md)] giver brugerne mulighed for at planlægge og køre specifikke rapporter og kodeenheder.</span><span class="sxs-lookup"><span data-stu-id="c42cf-106">Job queues in [!INCLUDE[d365fin](includes/d365fin_md.md)] enables users to schedule and run specific reports and codeunits.</span></span> <span data-ttu-id="c42cf-107">Du kan angive opgaver, der skal køres én gang eller gentagne gange.</span><span class="sxs-lookup"><span data-stu-id="c42cf-107">You can set jobs to run one time, or on a recurring basis.</span></span> <span data-ttu-id="c42cf-108">Det kan f.eks. være en god idé at køre rapporten **Sælger - salgsstatistik** ugentlig for at spore salget pr. sælger hver uge, eller at køre kodeenheden **Behandl servicekø for mail** dagligt for at sikre, at afventende mail til debitorer om deres serviceordrer sendes ud tids nok.</span><span class="sxs-lookup"><span data-stu-id="c42cf-108">For example, you might want to run the **Salesperson - Sales Statistics** report weekly, to track sales by salesperson each week, or you might want to run the **Process Service E-mail Queue** codeunit daily, to make sure pending email messages to customers regarding their service orders are sent out in a timely manner.</span></span>  

## <a name="add-jobs-to-the-job-queue"></a><span data-ttu-id="c42cf-109">Føje sager til opgavekøen</span><span class="sxs-lookup"><span data-stu-id="c42cf-109">Add Jobs to the Job Queue</span></span>
<span data-ttu-id="c42cf-110">Siden **Opgavekøposter** viser alle eksisterende sager.</span><span class="sxs-lookup"><span data-stu-id="c42cf-110">The **Job Queue Entries** page lists all existing jobs.</span></span> <span data-ttu-id="c42cf-111">Hvis du tilføjer en ny opgavekøpost, du vil planlægge, skal du angive oplysninger om typen af det objekt, du vil køre, f.eks. en rapport eller kodeenhed, og navnet og objekt-id'et for det objekt, du vil køre.</span><span class="sxs-lookup"><span data-stu-id="c42cf-111">If you add a new job queue entry that you want to schedule, you must specify information about the type of object you want to run, such as a report or codeunit, and the name and object ID of the object that you want to run.</span></span> <span data-ttu-id="c42cf-112">Du kan også tilføje parametre for at angive funktionsmåden for opgavekøposten.</span><span class="sxs-lookup"><span data-stu-id="c42cf-112">You can also add parameters to specify the behavior of the job queue entry.</span></span> <span data-ttu-id="c42cf-113">Du kan f.eks. tilføje en parameter til kun at sende bogførte salgsordrer.</span><span class="sxs-lookup"><span data-stu-id="c42cf-113">For example, you can add a parameter to only send posted sales orders.</span></span> <span data-ttu-id="c42cf-114">Du skal have tilladelse til at køre den pågældende rapport eller kodeenhed, ellers genereres der en fejl, når opgavekøen køres.</span><span class="sxs-lookup"><span data-stu-id="c42cf-114">You must have permission to run the particular report or codeunit, or an error will be returned when the job queue is run.</span></span>  

<span data-ttu-id="c42cf-115">Du kan også angive et filter i feltet **Opgavekøkategorifilter**.</span><span class="sxs-lookup"><span data-stu-id="c42cf-115">Optionally, you can set a filter in the **Job Queue Category Filter** field.</span></span> <span data-ttu-id="c42cf-116">Kategorier for opgavekøen kan bruges til at gruppere sager på listen.</span><span class="sxs-lookup"><span data-stu-id="c42cf-116">Job queue categories can be used to group jobs in the list.</span></span>

[!INCLUDE[d365fin](includes/d365fin_md.md)] <span data-ttu-id="c42cf-117">kører automatisk sagerne i overensstemmelse med de angivne planer for hver opgavekøpost.</span><span class="sxs-lookup"><span data-stu-id="c42cf-117">automatically runs the jobs according to the specified schedules for each job queue entry.</span></span> <span data-ttu-id="c42cf-118">Du kan også starte, stoppe og sætte en opgavekøpost i venteposition manuelt.</span><span class="sxs-lookup"><span data-stu-id="c42cf-118">You can also start, stop, and put a job queue entry on hold manually.</span></span>

### <a name="log-files"></a><span data-ttu-id="c42cf-119">Log-filer</span><span class="sxs-lookup"><span data-stu-id="c42cf-119">Log Files</span></span>
<span data-ttu-id="c42cf-120">Fejl vises på siden **Logposter i opgavekø**, som du kan få adgang til fra båndet.</span><span class="sxs-lookup"><span data-stu-id="c42cf-120">Errors are listed on the **Job Queue Log Entries** page that you can access from the ribbon.</span></span> <span data-ttu-id="c42cf-121">Du kan også foretage fejlfinding for opgavekøfejl.</span><span class="sxs-lookup"><span data-stu-id="c42cf-121">You can also troubleshoot job queue errors.</span></span> <span data-ttu-id="c42cf-122">De data, der genereres, når der køres en opgavekø, gemmes i databasen.</span><span class="sxs-lookup"><span data-stu-id="c42cf-122">Data that is generated when a job queue is run is stored in the database.</span></span>  

### <a name="background-posting-with-job-queues"></a><span data-ttu-id="c42cf-123">Baggrundsbogføring med opgavekøer</span><span class="sxs-lookup"><span data-stu-id="c42cf-123">Background Posting with Job Queues</span></span>
<span data-ttu-id="c42cf-124">Jobkøer er et effektivt værktøj til at planlægge kørsel af forretningsprocesser i baggrunden.</span><span class="sxs-lookup"><span data-stu-id="c42cf-124">Job queues are an effective tool to schedule the running of business processes in the background.</span></span> <span data-ttu-id="c42cf-125">For eksempel kan der være en forekomst, hvor flere brugere forsøger at bogføre salgsordrer på samme tid, men hvor kun én ordre kan behandles ad gangen.</span><span class="sxs-lookup"><span data-stu-id="c42cf-125">For example, there may be an instance in which multiple users are trying to post sales orders at the same time, but only one order can be processed at a time.</span></span> <span data-ttu-id="c42cf-126">Ved at oprette en baggrundsbogføring kan du placere bogføringerne i en kø til behandling i baggrunden.</span><span class="sxs-lookup"><span data-stu-id="c42cf-126">By setting up a background posting routine, you can place the postings in a queue for processing in the background.</span></span>  

 <span data-ttu-id="c42cf-127">Alternativt kan du planlægge posteringer i timevis, når det er belejligt for din organisation.</span><span class="sxs-lookup"><span data-stu-id="c42cf-127">Alternatively, you may want to schedule postings for hours when it is convenient for your organization.</span></span> <span data-ttu-id="c42cf-128">F.eks. giver det muligvis mening i din virksomhed at køre visse rutiner, når de fleste af dataindtastningerne for den pågældende dag er afsluttede.</span><span class="sxs-lookup"><span data-stu-id="c42cf-128">For example, it may make sense in your business to run certain routines when most of the data entry for the day has concluded.</span></span> <span data-ttu-id="c42cf-129">Du kan opnå dette ved at indstille opgavekøen til at køre forskellige massebogføringsrapporter, f.eks. rapporterne **Massebogfør salgsordrer**, **Massebogfør salgsfakturaer**, og **Massebogfør salgskreditnotaer**.</span><span class="sxs-lookup"><span data-stu-id="c42cf-129">You can achieve this by setting the job queue up to run various batch post reports, such as the **Batch Post Sales Orders**, **Batch Post Sales Invoices**, and **Batch Post Sales Credit Memos** reports.</span></span>  

 [!INCLUDE[d365fin](includes/d365fin_md.md)] <span data-ttu-id="c42cf-130">understøtter baggrundsbogføring for følgende dokumenttyper:</span><span class="sxs-lookup"><span data-stu-id="c42cf-130">supports background posting for the following document types:</span></span>  

-   <span data-ttu-id="c42cf-131">Salg: salgsordre, returvareordre, kreditnota, faktura</span><span class="sxs-lookup"><span data-stu-id="c42cf-131">Sales: sales order, return order, credit memo, invoice</span></span>  

-   <span data-ttu-id="c42cf-132">Køb: indkøbsordre, returvareordre, kreditnota, faktura</span><span class="sxs-lookup"><span data-stu-id="c42cf-132">Purchases: purchase order, return order, credit memo, invoice</span></span>  

 <span data-ttu-id="c42cf-133">Hvis opgavekøen ikke kan bogføre salgsordren, ændres status til **Fejlmeddelelse**, og salgsordren føjes til listen over salgsordrer, som brugeren skal håndtere.</span><span class="sxs-lookup"><span data-stu-id="c42cf-133">If the job queue cannot post the sales order, the status is changed to **Error**, and the sales order is added to the list of sales orders that the user will have to handle.</span></span>  

> [!NOTE]  
>  <span data-ttu-id="c42cf-134">Når du planlægger et bilag til bogføring, og bogføringen starter, konfigureres bogføringsrutinen automatisk til timeout i to timer, hvis den holder op med at svare af en eller anden årsag.</span><span class="sxs-lookup"><span data-stu-id="c42cf-134">When you schedule a document for posting and the posting process begins, the posting routine is automatically configured to time out within two hours if the posting routine stops responding for any reason.</span></span>  

<span data-ttu-id="c42cf-135">Du konfigurerer denne anvendelse af opgavekøen på henholdsvis siden **Salgsopsætning** eller siden **Købsopsætning**.</span><span class="sxs-lookup"><span data-stu-id="c42cf-135">You set up this use of the job queue on the **Sales & Receivables Setup** page or the **Purchases & Payables** page, respectively.</span></span> <span data-ttu-id="c42cf-136">På oversigtspanelet **Baggrundsbogføring** skal du markere afkrydsningsfeltet **Bogfør dokumenter via opgavekøen** og udfylde de relevante oplysninger.</span><span class="sxs-lookup"><span data-stu-id="c42cf-136">On the **Background Posting** FastTab, you choose the **Post Documents via Job Queue** check box and then fill in the relevant information.</span></span> <span data-ttu-id="c42cf-137">Her kan du også bruge feltet **Opgavekøkategorikode** til at udføre alle Opgavekøposter med denne kode.</span><span class="sxs-lookup"><span data-stu-id="c42cf-137">Here you can also use the **Job Queue Category Code** field to run all job queue entries with that code.</span></span> <span data-ttu-id="c42cf-138">Du kan f.eks. bruge kategorien **Salgsbogføring**, der filtrerer alle salgsordrer, der svarer til en opgavekø, der har den samme kategorikode.</span><span class="sxs-lookup"><span data-stu-id="c42cf-138">For example, you can use  a **SalesPost** category that filters to all sales orders that match any job queue that has the same category code.</span></span>  

> [!IMPORTANT]  
>  <span data-ttu-id="c42cf-139">Hvis du konfigurerer et opgave, der bogfører og udskriver dokumenter, og printeren viser en dialogboks, f.eks. en anmodning om legitimationsoplysninger eller en advarsel om næsten tom blækpatron, bogføres dit dokument, men det udskrives ikke.</span><span class="sxs-lookup"><span data-stu-id="c42cf-139">If you set up a job that will post and print documents, and the printer displays a dialog box, such as a request for credentials or a warning about low printer ink, your document is posted but not printed.</span></span> <span data-ttu-id="c42cf-140">Den tilsvarende opgavekøpost får på et tidspunkt timeout og feltet **Status** indstilles til **Fejl**.</span><span class="sxs-lookup"><span data-stu-id="c42cf-140">The corresponding job queue entry eventually times out and the **Status** field is set to **Error**.</span></span> <span data-ttu-id="c42cf-141">Derfor anbefaler vi, at du ikke bruger en printeropsæting, der kræver interaktion med visningen af printerdialogbokse i forbindelse med baggrundsbogføring.</span><span class="sxs-lookup"><span data-stu-id="c42cf-141">Accordingly, we recommend that you do not use a printer setup that requires interaction with the display of printer dialog boxes in conjunction with background posting.</span></span>  

## <a name="use-the-my-job-queue-part"></a><span data-ttu-id="c42cf-142">Brug delen Min opgavekø</span><span class="sxs-lookup"><span data-stu-id="c42cf-142">Use the My Job Queue Part</span></span>
<span data-ttu-id="c42cf-143">Delen **Min opgavekø** viser de poster i opgavekøen, som en bruger har startet, men som ikke er færdige endnu.</span><span class="sxs-lookup"><span data-stu-id="c42cf-143">The **My Job Queue** part shows the job queues entries that a user has started, but which are not yet finished.</span></span> <span data-ttu-id="c42cf-144">Som standard er delen ikke synlig, så du skal føje den til dit rollecenter.</span><span class="sxs-lookup"><span data-stu-id="c42cf-144">By default, the part is not visible, so you have to add it to your Role Center.</span></span> <span data-ttu-id="c42cf-145">Du kan finde flere oplysninger under [Ændring af grundlæggende indstillinger](ui-change-basic-settings.md).</span><span class="sxs-lookup"><span data-stu-id="c42cf-145">For more information, see [Changing Basic Settings](ui-change-basic-settings.md).</span></span>  

<span data-ttu-id="c42cf-146">I denne del kan du se de dokumenter, der behandles, eller som er i kø, hvor dit id er angivet i feltet **Tildelt bruger-id**.</span><span class="sxs-lookup"><span data-stu-id="c42cf-146">In this part, you can see those documents that are being processed or that are queued for which your ID is specified in the **Assigned User ID** field.</span></span> <span data-ttu-id="c42cf-147">Denne del hjælper dig med at holde styr på alle poster i opgavekøen, herunder dem der er relateret til baggrundsbogføring.</span><span class="sxs-lookup"><span data-stu-id="c42cf-147">The part helps you keep track of all job queue entries, including those related to background posting.</span></span> <span data-ttu-id="c42cf-148">Denne del kan give dig et overblik over, om der er opstået en fejl i bogføringen af et dokument, eller om der er fejl i en opgavekøpost.</span><span class="sxs-lookup"><span data-stu-id="c42cf-148">The part can tell you at a glance whether there has been an error in the posting of a document or if there are errors in a job queue entry.</span></span> <span data-ttu-id="c42cf-149">Delen giver dig også mulighed for at annullere bogføringen af et dokument, hvis det ikke kører.</span><span class="sxs-lookup"><span data-stu-id="c42cf-149">The part also lets you cancel a document posting if it is not running.</span></span>  

## <a name="security"></a><span data-ttu-id="c42cf-150">Sikkerhed</span><span class="sxs-lookup"><span data-stu-id="c42cf-150">Security</span></span>  
<span data-ttu-id="c42cf-151">Opgavekøposter kører på basis af tilladelser.</span><span class="sxs-lookup"><span data-stu-id="c42cf-151">Job queue entries run based on permissions.</span></span> <span data-ttu-id="c42cf-152">Disse tilladelser skal tillade kørsel af rapporten eller codeunit'en.</span><span class="sxs-lookup"><span data-stu-id="c42cf-152">Those permissions must allow the execution of the report or codeunit.</span></span>  

<span data-ttu-id="c42cf-153">Når en opgavekø aktiveres manuelt, køres den med legitimationsoplysningerne for brugeren.</span><span class="sxs-lookup"><span data-stu-id="c42cf-153">When a job queue is activated manually, it is run with the credentials of the user.</span></span> <span data-ttu-id="c42cf-154">Når en opgavekø aktiveres som en planlagt opgave, køres den med legitimationsoplysningerne for serverforekomsten.</span><span class="sxs-lookup"><span data-stu-id="c42cf-154">When a job queue is activated as a scheduled task, it is run with the credentials of the server instance.</span></span> <span data-ttu-id="c42cf-155">Når en opgave kører, køres den med legitimationsoplysningerne for den opgavekø, der aktiverede den.</span><span class="sxs-lookup"><span data-stu-id="c42cf-155">When a job is run, it is run with the credentials of the job queue that activates it.</span></span> <span data-ttu-id="c42cf-156">Men den bruger, der oprettede opgavekøposten, skal dog også have tilladelser.</span><span class="sxs-lookup"><span data-stu-id="c42cf-156">However, the user who created that job queue entry must also have permissions.</span></span> <span data-ttu-id="c42cf-157">Når en opgave er tilstanden "Kør i brugersession" (f.eks. i baggrundsbogføring), køres den med legitimationsoplysningerne for den bruger, der oprettede jobbet.</span><span class="sxs-lookup"><span data-stu-id="c42cf-157">When a job is “run in user session” (such as during background posting), it is run with the credentials of the user who created that job.</span></span>  

> [!IMPORTANT]  
>  <span data-ttu-id="c42cf-158">Hvis du bruger tilladelsessættet SUPER, der følger med [!INCLUDE[d365fin](includes/d365fin_md.md)], har du og dine brugere tilladelse til at køre alle objekter.</span><span class="sxs-lookup"><span data-stu-id="c42cf-158">If you use the SUPER permissions set that comes with [!INCLUDE[d365fin](includes/d365fin_md.md)], you and your users have permissions to run all objects.</span></span> <span data-ttu-id="c42cf-159">I dette tilfælde begrænses adgangen for hver bruger kun af tilladelser til data.</span><span class="sxs-lookup"><span data-stu-id="c42cf-159">In this case, access for each user is only limited by permissions for data.</span></span>  

## <a name="using-job-queues-effectively"></a><span data-ttu-id="c42cf-160">Effektiv brug af opgavekøer</span><span class="sxs-lookup"><span data-stu-id="c42cf-160">Using Job Queues Effectively</span></span>  
<span data-ttu-id="c42cf-161">Opgavekøposten har mange felter, hvis formål er at overføre parametre i en codeunit, du har angivet til kørsel sammen med en opgavekø.</span><span class="sxs-lookup"><span data-stu-id="c42cf-161">The job queue entry record has many fields whose purpose is to carry parameters into a codeunit that you have specified to be run with a job queue.</span></span> <span data-ttu-id="c42cf-162">Det betyder også, at codeunits, der skal køres via opgavekøen, skal angives med opgavekøposten som en parameter i udløseren **OnRun**.</span><span class="sxs-lookup"><span data-stu-id="c42cf-162">This also means that codeunits that are to be run via the job queue must be specified with the Job Queue Entry record as a parameter in the **OnRun** trigger.</span></span> <span data-ttu-id="c42cf-163">Dette giver et ekstra niveau af sikkerhed, da dette forhindrer brugerne i at køre vilkårlige kodeenheder via opgavekøen.</span><span class="sxs-lookup"><span data-stu-id="c42cf-163">This helps provide an extra level of security, as this prevents users from running random codeunits via the job queue.</span></span> <span data-ttu-id="c42cf-164">Hvis brugeren skal overføre parametre til en rapport, er den eneste måde at gøre dette ved at placere rapportudførelsen i en codeunit, som derefter analyserer inputparametrene og skriver dem i rapporten, før den udføres.</span><span class="sxs-lookup"><span data-stu-id="c42cf-164">If the user must pass parameters to a report, the only way to do this is by wrapping the report execution into a codeunit, which then parses the input parameters and enters them into the report before executing it.</span></span>  

## <a name="see-also"></a><span data-ttu-id="c42cf-165">Se også</span><span class="sxs-lookup"><span data-stu-id="c42cf-165">See Also</span></span>  
[<span data-ttu-id="c42cf-166">Opsætning</span><span class="sxs-lookup"><span data-stu-id="c42cf-166">Administration</span></span>](admin-setup-and-administration.md)  
[<span data-ttu-id="c42cf-167">Konfigurere Business Central</span><span class="sxs-lookup"><span data-stu-id="c42cf-167">Setting Up Business Central</span></span>](setup.md)  

