---
title: Rydde op i data med opbevaringspolitikker | Microsoft Docs
description: Du kan angive, hvor ofte du vil slette bestemte datatyper.
author: bholtorf
ms.service: dynamics365-business-central
ms.topic: conceptual
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: delete, data, retention, policy, policies
ms.date: 10/01/2020
ms.author: bholtorf
ms.openlocfilehash: 52f99b262dbfa5568650b72356ec43442fc75284
ms.sourcegitcommit: ff2b55b7e790447e0c1fcd5c2ec7f7610338ebaa
ms.translationtype: HT
ms.contentlocale: da-DK
ms.lasthandoff: 02/15/2021
ms.locfileid: "5378519"
---
# <a name="define-retention-policies"></a><span data-ttu-id="e431c-103">Definere opbevaringspolitikker</span><span class="sxs-lookup"><span data-stu-id="e431c-103">Define Retention Policies</span></span>
<span data-ttu-id="e431c-104">Administratorer kan definere opbevaringspolitikker for at angive, hvor ofte [!INCLUDE[prod_short](includes/prod_short.md)] skal slette forældede data i tabeller, der indeholder logposter og poster, der er arkiveret.</span><span class="sxs-lookup"><span data-stu-id="e431c-104">Administrators can define retention policies to specify how frequently they want [!INCLUDE[prod_short](includes/prod_short.md)] to delete outdated data in tables that contain log entries and archived records.</span></span> <span data-ttu-id="e431c-105">Hvis du f. eks. rydder poster i logfilen, bliver det nemmere at arbejde med de data, der rent faktisk er relevante.</span><span class="sxs-lookup"><span data-stu-id="e431c-105">For example, cleaning up log entries can make it easier to work with the data that's actually relevant.</span></span> <span data-ttu-id="e431c-106">Politikker kan omfatte alle data i de tabeller, der ligger ud over udløbsdatoen, eller du kan tilføje filterkriterier, som kun skal indeholde bestemte udløbne data i politikken.</span><span class="sxs-lookup"><span data-stu-id="e431c-106">Policies can include all data in the tables that is past the expiration date, or you can add filter criteria that will include only certain expired data in the policy.</span></span> 

## <a name="required-setups-and-permissions"></a><span data-ttu-id="e431c-107">Krævede opsætninger og tilladelser</span><span class="sxs-lookup"><span data-stu-id="e431c-107">Required Setups and Permissions</span></span>
<span data-ttu-id="e431c-108">Før du kan oprette med opbevaringspolitikker, skal du angive følgende.</span><span class="sxs-lookup"><span data-stu-id="e431c-108">Before you can create retention policies, you must set up the following.</span></span>

|<span data-ttu-id="e431c-109">Installation</span><span class="sxs-lookup"><span data-stu-id="e431c-109">Setup</span></span>  |<span data-ttu-id="e431c-110">Description</span><span class="sxs-lookup"><span data-stu-id="e431c-110">Description</span></span>  |
|---------|---------|
|<span data-ttu-id="e431c-111">**Tilladte tabeller**</span><span class="sxs-lookup"><span data-stu-id="e431c-111">**Allowed Tables**</span></span>     |<span data-ttu-id="e431c-112">Der er en liste over de tabeller, der kan inkluderes i opbevaringspolitikkerne.</span><span class="sxs-lookup"><span data-stu-id="e431c-112">We provide a list of the tables that can be included in retention policies.</span></span> <span data-ttu-id="e431c-113">Hvis du vil føje tabeller fra en filtype til en opbevaringspolitik, skal udvikleren imidlertid føje deres tabeller til listen.</span><span class="sxs-lookup"><span data-stu-id="e431c-113">However, if you want to add tables from an extension to a retention policy a developer must add their tables to the list.</span></span> <span data-ttu-id="e431c-114">Du kan finde flere oplysninger i [Herunder din udvidelse i en opbevaringspolitik](admin-data-retention-policies.md#including-your-extension-in-a-retention-policy-requires-help-from-a-developer).</span><span class="sxs-lookup"><span data-stu-id="e431c-114">For more information, see [Including Your Extension in a Retention Policy](admin-data-retention-policies.md#including-your-extension-in-a-retention-policy-requires-help-from-a-developer).</span></span>          |
|<span data-ttu-id="e431c-115">**Opbevaringsperioder**</span><span class="sxs-lookup"><span data-stu-id="e431c-115">**Retention Periods**</span></span>     |<span data-ttu-id="e431c-116">Angive perioder, hvor der skal være data i tabellerne i en politik.</span><span class="sxs-lookup"><span data-stu-id="e431c-116">Specify periods of time for which to keep data in the tables in a policy.</span></span> <span data-ttu-id="e431c-117">Perioderne bestemmer, hvor ofte data vil blive slettet.</span><span class="sxs-lookup"><span data-stu-id="e431c-117">The periods determine how often data will be deleted.</span></span>         |

<span data-ttu-id="e431c-118">Derudover skal du have tilladelse som SUPER-bruger eller til opsætning af opbevaringspolitik.</span><span class="sxs-lookup"><span data-stu-id="e431c-118">Additionally, you must have the SUPER user permissions or the Retention Policy Setup permission set.</span></span> <span data-ttu-id="e431c-119">Brugere, der har fået tildelt tilladelsen til opsætning af tilbageholdelsespolitik, kan definere opbevaringspolitikker for tabeller, selvom de ikke har læse-og slette tilladelser til tabellerne.</span><span class="sxs-lookup"><span data-stu-id="e431c-119">Users who are granted the Retention Policy Setup permission set can define retention policies for tables, even if they do not have Read and Delete permissions for those tables.</span></span> <span data-ttu-id="e431c-120">Opgavekøposten skal køre som en bruger med tilladelse til at læse og slette dataene.</span><span class="sxs-lookup"><span data-stu-id="e431c-120">The job queue entry must run as a user with permissions to read and delete the data.</span></span> <span data-ttu-id="e431c-121">Det anbefales, at du ikke tildeler tilladelsen opsætning af opbevaringspolitik som angivet for brugere, som ikke skal have tilladelse til at slette data.</span><span class="sxs-lookup"><span data-stu-id="e431c-121">We recommend that you do not grant the Retention Policy Setup permission set to users who should not be allowed to delete data.</span></span>

> [!NOTE]
> <span data-ttu-id="e431c-122">Hvis du bruger [!INCLUDE[prod_short](includes/prod_short.md)] on-premises, og du vil afprøve opbevaringspolitikkerne i CRONUS-demonstrationsdatabasen, er der et par ting, du skal gøre.</span><span class="sxs-lookup"><span data-stu-id="e431c-122">If you are using [!INCLUDE[prod_short](includes/prod_short.md)] on-premises, and you want to try out retention policies in the the Cronus demonstration database, there are a few things you need to do.</span></span> <span data-ttu-id="e431c-123">Demonstrationsregnskabet indeholder ikke tabeller, som du kan bruge med opbevaringspolitikker, så du skal tilføje dem.</span><span class="sxs-lookup"><span data-stu-id="e431c-123">The demonstration company does not contain tables that you can use with retention policies, so you need to add them.</span></span> <span data-ttu-id="e431c-124">Hvis du vil gøre dette, skal du oprette et nyt tomt regnskab i demonstrationsdatabasen.</span><span class="sxs-lookup"><span data-stu-id="e431c-124">To do that, create a new, blank company in the demonstration database.</span></span> <span data-ttu-id="e431c-125">Importér den RapidStart-konfigurationspakke, der svarer til standard NAV17.0.W1.ENU.STANDARD.rapidstart-pakken, i det nye regnskab.</span><span class="sxs-lookup"><span data-stu-id="e431c-125">In the new company, import the RapidStart configuration package for your country that corresponds to the standard NAV17.0.W1.ENU.STANDARD.rapidstart package.</span></span> <span data-ttu-id="e431c-126">Konfigurationsdataene for opbevaringspolitikker vil være tilgængelige i det nye regnskab.</span><span class="sxs-lookup"><span data-stu-id="e431c-126">The setup data for retention policies will be available in the new company.</span></span>

### <a name="to-create-retention-periods"></a><span data-ttu-id="e431c-127">Sådan oprettes opbevaringsperioder</span><span class="sxs-lookup"><span data-stu-id="e431c-127">To create retention periods</span></span>
<span data-ttu-id="e431c-128">Opbevaringsperioderne kan være så lange eller korte, som du har lyst til.</span><span class="sxs-lookup"><span data-stu-id="e431c-128">Retention periods can be as long or as short as you want.</span></span> <span data-ttu-id="e431c-129">Hvis du vil oprette opbevaringsperioder på siden **Opbevaringspolitikker**, skal du bruge handlingen **Opbevaringsperiode**.</span><span class="sxs-lookup"><span data-stu-id="e431c-129">To create retention periods, on the **Retention Policies** page, use the **Retention Period** action.</span></span> <span data-ttu-id="e431c-130">De perioder, du definerer, er tilgængelige for alle politikker.</span><span class="sxs-lookup"><span data-stu-id="e431c-130">The periods you define will be available for all policies.</span></span>

> [!NOTE]
> <span data-ttu-id="e431c-131">Af hensyn til kompatibiliteten har vi defineret en mindste opbevaringsperiode for nogle tabeller.</span><span class="sxs-lookup"><span data-stu-id="e431c-131">For compliance reasons, we have defined a minimum retention period for some tables.</span></span> <span data-ttu-id="e431c-132">Hvis du angiver en opbevaringsperiode, der er kortere end minimumkravet, viser en meddelelse den obligatoriske periode.</span><span class="sxs-lookup"><span data-stu-id="e431c-132">If you set a retention period that is shorter than minimum required, a message will display the mandatory period.</span></span>

### <a name="set-up-a-retention-policy"></a><span data-ttu-id="e431c-133">Opsæt opbevaringspolitik</span><span class="sxs-lookup"><span data-stu-id="e431c-133">Set up a retention policy</span></span>
1. <span data-ttu-id="e431c-134">Vælg ikonet ![Elpære, der åbner funktionen Fortæl mig](media/ui-search/search_small.png "Fortæl mig, hvad du vil foretage dig"), angiv **Opbevaringspolitikker**, og vælg derefter det relaterede link.</span><span class="sxs-lookup"><span data-stu-id="e431c-134">Choose the ![Lightbulb that opens the Tell Me feature](media/ui-search/search_small.png "Tell me what you want to do") icon, enter **Retention Policies**, and choose the related link.</span></span>
2. <span data-ttu-id="e431c-135">I feltet **Tabel-id** skal du vælge den tabel, du vil medtage i politikken.</span><span class="sxs-lookup"><span data-stu-id="e431c-135">In the **Table ID** field, choose the table that you want to include in the policy.</span></span>
3. <span data-ttu-id="e431c-136">I feltet **Opbevaringsperiode** skal du angive, hvor længe dataene i tabellen skal være.</span><span class="sxs-lookup"><span data-stu-id="e431c-136">In the **Retention Period** field, specify the length of time for which to keep the data in the table.</span></span>
4. <span data-ttu-id="e431c-137">Valgfrit: Hvis du vil anvende politikken på specifikke data i en tabel, skal du slå funktionen Anvend på alle poster fra.</span><span class="sxs-lookup"><span data-stu-id="e431c-137">Optional: To apply the policy to specific data in a table, turn off the Apply to all records toggle.</span></span> <span data-ttu-id="e431c-138">Oversigtspanelet til opbevaring af oplysninger vises, hvor du kan angive filtre for at oprette datasæt for hver linje.</span><span class="sxs-lookup"><span data-stu-id="e431c-138">The Record Retention Policy FastTab will display, where you can set filters to create subsets of data for each line.</span></span> <span data-ttu-id="e431c-139">Du kan finde flere oplysninger i [Filtrering](ui-enter-criteria-filters.md#filtering).</span><span class="sxs-lookup"><span data-stu-id="e431c-139">For more information, see [Filtering](ui-enter-criteria-filters.md#filtering).</span></span>

   > [!NOTE]
   > <span data-ttu-id="e431c-140">Hver linje har sin egen opbevaringsperiode.</span><span class="sxs-lookup"><span data-stu-id="e431c-140">Each line has its own retention period.</span></span> <span data-ttu-id="e431c-141">Hvis du angiver forskellige opbevaringsperioder for de samme data, bruges den længste periode.</span><span class="sxs-lookup"><span data-stu-id="e431c-141">If you specify different retention periods for the same data, the longest period will be used.</span></span> <span data-ttu-id="e431c-142">Nogle tabeller indeholder også filtre, som du ikke kan ændre eller fjerne.</span><span class="sxs-lookup"><span data-stu-id="e431c-142">Also, some tables contain filters that you cannot change or remove.</span></span> <span data-ttu-id="e431c-143">Som en hjælp til at identificere disse filtre vises de med farven lysere skrifttype.</span><span class="sxs-lookup"><span data-stu-id="e431c-143">To help you identify these filters, they appear in a lighter color font.</span></span>

## <a name="applying-retention-policies"></a><span data-ttu-id="e431c-144">Anvende opbevaringspolitikker</span><span class="sxs-lookup"><span data-stu-id="e431c-144">Applying Retention Policies</span></span>
<span data-ttu-id="e431c-145">Du kan bruge en Opgavekøpost til at anvende opbevaringspolitikker til at slette data automatisk, eller du kan anvende politikker manuelt.</span><span class="sxs-lookup"><span data-stu-id="e431c-145">You can use a job queue entry to apply retention policies to delete data automatically, or you can manually apply policies.</span></span>

<span data-ttu-id="e431c-146">Hvis du vil anvende en opbevaringspolitik automatisk, skal du blot oprette og aktivere en politik.</span><span class="sxs-lookup"><span data-stu-id="e431c-146">To apply a retention policy automatically, just create and enable a policy.</span></span> <span data-ttu-id="e431c-147">Når du aktiverer en politik, opretter vi en Opgavekøpost, som anvender opbevaringspolitikker i overensstemmelse med den angivne opbevaringsperiode.</span><span class="sxs-lookup"><span data-stu-id="e431c-147">When you enable a policy we create a job queue entry that will apply retention policies according to the retention period you specify.</span></span> <span data-ttu-id="e431c-148">Alle opbevaringspolitikker benytter den samme Opgavekøpost.</span><span class="sxs-lookup"><span data-stu-id="e431c-148">All retention policies will use the same job queue entry.</span></span> <span data-ttu-id="e431c-149">Som standard anvender opgavekøposten politikken hver dag kl. 0200.</span><span class="sxs-lookup"><span data-stu-id="e431c-149">By default, the job queue entry applies the policy every day at 0200.</span></span> <span data-ttu-id="e431c-150">Du kan ændre standardindstillingen, men hvis du gør det, anbefales det at køre uden for normal arbejdstid.</span><span class="sxs-lookup"><span data-stu-id="e431c-150">You can change the default, but if you do we recommend that it runs outside business hours.</span></span> <span data-ttu-id="e431c-151">Du kan finde flere oplysninger i [Bruge opgavekøer til at planlægge opgaver](admin-job-queues-schedule-tasks.md).</span><span class="sxs-lookup"><span data-stu-id="e431c-151">For more information, see [Use Job Queues to Schedule Tasks](admin-job-queues-schedule-tasks.md).</span></span> 

<span data-ttu-id="e431c-152">Du kan anvende en politik manuelt vha handlingen **Anvend manuelt** på siden **Opbevaringspolitikker**.</span><span class="sxs-lookup"><span data-stu-id="e431c-152">You can manually apply a policy by using the **Apply Manually** action on the **Retention Policies** page.</span></span> <span data-ttu-id="e431c-153">Hvis du altid vil anvende en politik manuelt, skal du aktivere den **Manuelt**.</span><span class="sxs-lookup"><span data-stu-id="e431c-153">If you want to always apply a policy manually, turn on the **Manual** toggle.</span></span> <span data-ttu-id="e431c-154">Opgavekøposten ignorerer politikken, når den kører.</span><span class="sxs-lookup"><span data-stu-id="e431c-154">The job queue entry will disregard the policy when it runs.</span></span>

## <a name="viewing-retention-policy-log-entries"></a><span data-ttu-id="e431c-155">Se logførte poster for opbevaringspolitikker</span><span class="sxs-lookup"><span data-stu-id="e431c-155">Viewing Retention Policy Log Entries</span></span>
<span data-ttu-id="e431c-156">Se aktivitet, der er relateret til opbevaringspolitikker, på siden **Opbevaringspolitiklog**.</span><span class="sxs-lookup"><span data-stu-id="e431c-156">You can view activity related to retention policies in the **Retention Policy Log** page.</span></span> <span data-ttu-id="e431c-157">Der oprettes f. eks. poster, når der anvendes en politik, eller hvis der opstod fejl, når det skete.</span><span class="sxs-lookup"><span data-stu-id="e431c-157">For example, entries are created when when a policy is applied, or if errors occurred when that happened.</span></span> 

## <a name="including-your-extension-in-a-retention-policy-requires-help-from-a-developer"></a><span data-ttu-id="e431c-158">Medtage din udvidelse i en opbevaringspolitik (kræver hjælp fra en udvikler)</span><span class="sxs-lookup"><span data-stu-id="e431c-158">Including Your Extension in a Retention Policy (Requires Help from a Developer)</span></span>
<span data-ttu-id="e431c-159">Opbevaringspolitikker dækker som standard kun tabeller, der er medtaget på den liste over [!INCLUDE[prod_short](includes/prod_short.md)]-tabeller, som vi yder.</span><span class="sxs-lookup"><span data-stu-id="e431c-159">By default, retention policies cover only tables that are included in the list of [!INCLUDE[prod_short](includes/prod_short.md)] tables that we provide.</span></span> <span data-ttu-id="e431c-160">Du kan fjerne standardtabeller fra listen, og du kan tilføje tabeller, som du ejer.</span><span class="sxs-lookup"><span data-stu-id="e431c-160">You can remove default tables from the list, and you can add tables that you own.</span></span> <span data-ttu-id="e431c-161">Det vil sige, at du ikke kan tilføje en tabel, som du ikke selv har oprettet.</span><span class="sxs-lookup"><span data-stu-id="e431c-161">That is, you cannot add a table that you did not create yourself.</span></span> <span data-ttu-id="e431c-162">Du kan f. eks. ikke tilføje andre tabeller fra [!INCLUDE[prod_short](includes/prod_short.md)] eller fra en udvidelse, du har købt.</span><span class="sxs-lookup"><span data-stu-id="e431c-162">For example, you cannot add other tables from [!INCLUDE[prod_short](includes/prod_short.md)] or from an extension that you have purchased.</span></span>

<span data-ttu-id="e431c-163">Hvis du vil føje tabeller til listen over tilladte tabeller, skal en udvikler tilføje en kode, f. eks. codeunit til installationsprogrammet til udvidelsen (en codeunit med undertypen *Installation*).</span><span class="sxs-lookup"><span data-stu-id="e431c-163">To add your tables to the list of allowed tables, a developer must add some code, for example to the installer codeunit for the extension (a codeunit with the *install* subtype).</span></span> 

<span data-ttu-id="e431c-164">Når en udvikler tilføjer en tabel, kan de angive obligatoriske og standardfiltre.</span><span class="sxs-lookup"><span data-stu-id="e431c-164">When a developer adds a table, they can specify mandatory and default filters.</span></span> <span data-ttu-id="e431c-165">Obligatoriske filtre kan ikke fjernes eller ændres senere, når du tilføjer tabeller for at definere en opbevaringspolitik.</span><span class="sxs-lookup"><span data-stu-id="e431c-165">Mandatory filters cannot be removed or modified later when you add tables to define a retention policy.</span></span> <span data-ttu-id="e431c-166">Standardfiltre er blot brugervenlige forslag.</span><span class="sxs-lookup"><span data-stu-id="e431c-166">Default filters are just friendly suggestions.</span></span>

<span data-ttu-id="e431c-167">I det følgende finder du eksempler på, hvordan du kan føje en tabel til listen over tilladte tabeller med og uden obligatorisk eller standardfiltre.</span><span class="sxs-lookup"><span data-stu-id="e431c-167">The following are examples of how to add a table to the list of allowed tables with, and without, mandatory or default filters.</span></span> <span data-ttu-id="e431c-168">Hvis du vil have et mere komplekst eksempel, skal du se codeunit 3999 "Reten.</span><span class="sxs-lookup"><span data-stu-id="e431c-168">For a more complex example, see codeunit 3999 "Reten.</span></span> <span data-ttu-id="e431c-169">Pol.</span><span class="sxs-lookup"><span data-stu-id="e431c-169">Pol.</span></span> <span data-ttu-id="e431c-170">Installation - BaseApp".</span><span class="sxs-lookup"><span data-stu-id="e431c-170">Install - BaseApp".</span></span> 

```
 trigger OnInstallAppPerCompany()
    var
        RetenPolAllowedTables: Codeunit "Reten. Pol. Allowed Tables";
    begin
        RetenPolAllowedTables.AddAllowedTable(Database::"Retention Policy Log Entry");
    end;
```

<span data-ttu-id="e431c-171">Følgende eksempel indeholder et obligatorisk filter.</span><span class="sxs-lookup"><span data-stu-id="e431c-171">The following example includes a mandatory filter.</span></span>

```
 trigger OnInstallAppPerCompany()
    var
        ChangeLogEntry: Record "Change Log Entry";
        RetenPolAllowedTables: Codeunit "Reten. Pol. Allowed Tables";
        RetentionPeriod: Enum "Retention Period Enum";
        RecRef: RecordRef;
        TableFilters: JsonArray;
        Enabled: Boolean;
        Mandatory: Boolean;
    begin
        ChangeLogEntry.Reset();
        ChangeLogEntry.SetFilter("Field Log Entry Feature", '%1|%2', ChangeLogEntry."Field Log Entry Feature"::"Monitor Sensitive Fields", ChangeLogEntry."Field Log Entry Feature"::All);
        RecRef.GetTable(ChangeLogEntry);
        Enabled := true;
        Mandatory := true;
        RetenPolAllowedTables.AddTableFilterToJsonArray(TableFilters, RetentionPeriod::"28 Days", ChangeLogEntry.FieldNo(SystemCreatedAt), Enabled, Mandatory, RecRef);
        RetenPolAllowedTables.AddAllowedTable(Database::"Change Log Entry", ChangeLogEntry.FieldNo(SystemCreatedAt), TableFilters);
    end;
```
<span data-ttu-id="e431c-172">Når en udvikler har føjet tabeller til listen, kan en administrator medtage dem i en opbevaringspolitik.</span><span class="sxs-lookup"><span data-stu-id="e431c-172">After a developer has added tables to the list, an administrator can include them in a retention policy.</span></span> 

## <a name="see-also"></a><span data-ttu-id="e431c-173">Se også</span><span class="sxs-lookup"><span data-stu-id="e431c-173">See Also</span></span>
[<span data-ttu-id="e431c-174">Ændringer af revision i Business Central</span><span class="sxs-lookup"><span data-stu-id="e431c-174">Auditing Changes in Business Central</span></span>](across-log-changes.md)  
[<span data-ttu-id="e431c-175">Filtrering</span><span class="sxs-lookup"><span data-stu-id="e431c-175">Filtering</span></span>](ui-enter-criteria-filters.md#filtering)  
[<span data-ttu-id="e431c-176">Du kan bruge opgavekøer til at planlægge opgaver</span><span class="sxs-lookup"><span data-stu-id="e431c-176">Use Job Queues to Schedule Tasks</span></span>](admin-job-queues-schedule-tasks.md)  
<span data-ttu-id="e431c-177">[Arbejde med [!INCLUDE[prod_short](includes/prod_short.md)]](ui-work-product.md)</span><span class="sxs-lookup"><span data-stu-id="e431c-177">[Working with [!INCLUDE[prod_short](includes/prod_short.md)]](ui-work-product.md)</span></span>  

[!INCLUDE[footer-include](includes/footer-banner.md)]